<p>The villa bearing the name <%= @current_villa.name %> is at your service.</p>

<h2>
  <%= @current_villa.name %> <%= coordinates @current_villa %>
</h2>

<h3>
  Buildings
</h3>

<table class="col-md-8 table table-striped">
  <tr>
    <th></th>
    <th>Level</th>
    <th>Points</th>
    <th>Costs</th>
    <th>Build time</th>
    <th>Build</th>
  </tr>
  <%= Enum.map Application.get_env(:la_famiglia, :buildings), fn({k, b}) -> %>
    <tr>
      <td><%= k %></td>
      <td><%= Building.level(@current_villa, b) %> (<%= Building.virtual_level(@current_villa, b) %>)</td>
      <td><%= @current_villa |> Map.get(k) |> b.points.() %></td>
      <td><%= @current_villa |> Map.get(k) |> b.costs.() |> resources %></td>
      <td><%= @current_villa |> Map.get(k) |> b.build_time.() %></td>
      <td></td>
    </tr>
  <% end %>
</table>
